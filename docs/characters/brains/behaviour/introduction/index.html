<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/platformer/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/platformer/assets/img/favicon.ico" type="image/x-icon">
        <title>Platformer Game Kit - Introduction</title>
        <link href="/platformer/assets/css/highlight.css" rel="stylesheet">
        <link href="/platformer/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/platformer/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/platformer/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/platformer/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/platformer/assets/css/override.css" rel="stylesheet">
        <script src="/platformer/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/platformer/assets/js/bootstrap.min.js"></script>        
        <script src="/platformer/assets/js/app.min.js"></script>         
        <script src="/platformer/assets/js/highlight.pack.js"></script>   
        <script src="/platformer/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/platformer/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/platformer/assets/js/mermaid.min.js"></script>
        <script src="/platformer/assets/js/svg-pan-zoom.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/platformer/assets/js/html5shiv.min.js"></script>
        <script src="/platformer/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/platformer/" class="logo">
                            <span>Platformer Game Kit</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li class="active"><a href="/platformer/docs"><img src="/platformer/images/docs.png" height="20px" width="7.5px" style="left:-5px"> Documentation</a></li>
        <li><a href="/platformer/docs/package/download"><img src="/platformer/images/unity-logo.png" height="20px" width="19.0625px" style="left:-4px"> Download</a></li>
        <li><a href="/platformer/api/PlatformerGameKit"><img src="/platformer/images/api.png" height="20px" width="18.125px" style="left:-3px"> API v1.0</a></li>
        <li><a href="/platformer/docs/package/contact"><img src="/platformer/images/contact.png" height="20px" width="19.6875px" style="left:-4px"> Contact</a></li>
        <li><a href="/kailas-dierk/unity-assets"><img src="/platformer/images/kybernetik.png" height="20px" width="20px" style="left:-2px"> Other Assets</a></li>

<li style="width:100%">
<form class="search-form" name="search" action="/platformer/search">
<span><input class="search-input" id="search" name="q" type="text" placeholder="Search..."></span>
<div class="search-button"><button type="submit"><i class="fa fa-search"></i></button></div>
</form>
</li> 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#core-concept">Core Concept</a></p>
<p><a href="#example">Example</a></p>
<p><a href="#brain">Brain</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li class="treeview">
                    <a href="/platformer/docs/package">Package</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/platformer/docs/package/download">Download</a></li>
                <li><a href="/platformer/docs/package/contact">Contact</a></li>
                <li><a href="/platformer/docs/package/license">License</a></li>

                    </ul>
                </li>
                <li><a href="/platformer/docs/scenes">Scenes</a></li>
                <li class="treeview">
                    <a href="/platformer/docs/art">Art</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/platformer/docs/art/import">Import</a></li>
                <li><a href="/platformer/docs/art/organization">Organization</a></li>
                <li><a href="/platformer/docs/art/animations">Animations</a></li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/platformer/docs/characters">Characters</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/platformer/docs/characters/character">Character Component</a></li>
                <li><a href="/platformer/docs/characters/animancer">Animancer Component</a></li>
                <li><a href="/platformer/docs/characters/physics">Physics</a></li>
                <li class="treeview active">
                    <a href="/platformer/docs/characters/brains">Brains</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/platformer/docs/characters/brains/player">Player Input Brain</a></li>
                <li class="treeview active">
                    <a href="/platformer/docs/characters/brains/behaviour">Behaviour Tree Brain</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="selected"><a href="/platformer/docs/characters/brains/behaviour/introduction">Introduction</a></li>
                <li><a href="/platformer/docs/characters/brains/behaviour/general">General Nodes</a></li>
                <li><a href="/platformer/docs/characters/brains/behaviour/specific">Specific Nodes</a></li>
                <li><a href="/platformer/docs/characters/brains/behaviour/enemies">Enemies</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/platformer/docs/characters/states">States</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/platformer/docs/characters/states/introduction">Introduction</a></li>
                <li><a href="/platformer/docs/characters/states/multi-state">Multi-State</a></li>
                <li class="treeview">
                    <a href="/platformer/docs/characters/states/idle">Idle</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/platformer/docs/characters/states/idle/idle">Idle</a></li>
                <li><a href="/platformer/docs/characters/states/idle/mobile-idle">Mobile Idle</a></li>
                <li><a href="/platformer/docs/characters/states/idle/locomotion">Locomotion</a></li>
                <li><a href="/platformer/docs/characters/states/idle/wall-slide">Wall Slide</a></li>
                <li><a href="/platformer/docs/characters/states/idle/land">Land</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/platformer/docs/characters/states/jump">Jump</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/platformer/docs/characters/states/jump/jump">Jump</a></li>
                <li><a href="/platformer/docs/characters/states/jump/hold">Hold Jump</a></li>
                <li><a href="/platformer/docs/characters/states/jump/wall">Wall Jump</a></li>
                <li><a href="/platformer/docs/characters/states/jump/air">Air Jump</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/platformer/docs/characters/states/attack">Attack</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/platformer/docs/characters/states/attack/basic">Basic Action</a></li>
                <li><a href="/platformer/docs/characters/states/attack/advanced">Advanced Attack</a></li>
                <li><a href="/platformer/docs/characters/states/attack/side">Side Attack</a></li>

                    </ul>
                </li>
                <li><a href="/platformer/docs/characters/states/flinch">Flinch</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/platformer/docs/combat">Combat</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/platformer/docs/combat/hits">Hits</a></li>
                <li><a href="/platformer/docs/combat/melee">Melee Attacks</a></li>
                <li><a href="/platformer/docs/combat/ranged">Ranged Attacks</a></li>
                <li><a href="/platformer/docs/combat/teams">Teams</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/platformer/docs/other">Other Topics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/platformer/docs/other/camera-man">Camera Man</a></li>
                <li><a href="/platformer/docs/other/camera-shake">Camera Shake</a></li>
                <li><a href="/platformer/docs/other/layers">Physics Layers</a></li>
                <li><a href="/platformer/docs/other/moving">Moving Platforms</a></li>

                    </ul>
                </li>
                <li><a href="/platformer/docs/changes">Changes</a></li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>Introduction</h1>
		</section>
	<section class="content">
		<p>A Behaviour Tree is a system for managing logic in a way that is particularly well suited for AI. <a href="https://assetstore.unity.com/?q=behaviour%20tree&amp;aid=1100l8ah5">There are many Behaviour Tree plugins on the Unity Asset Store</a>, but this system uses a much simpler implementation to avoid requiring any more assets. This implementation is should be easy to understand and could potentially be extended, but if you intend to use the Platformer Game Kit to make a real game you might want to consider investing in a fully fledged Behaviour Tree plugin to start from a more powerful baseline. In particular, the Inspector interface of this system is alright for the simple behaviours used here but would start to become cumbersome in more complex situations.</p>
<p>This system uses Animancer's <a href="/animancer/docs/manual/other/polymorphic">Polymorphic Drawer</a> to allow nodes to be configured in the Inspector without needing any specific custom Inspector code for it.</p>
<p><img src="../enemies/gobbler.png" class="img-responsive"></p>
<h1 id="core-concept">Core Concept</h1>
<p>The basic idea behind Behaviour Trees is that they are made up of various nodes which execute certain logic and then return a <code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/Result">Result</a></code>:</p>
<pre><code class="language-cs">public enum <a href="/platformer/api/PlatformerGameKit.BehaviourTrees/Result">Result</a>
{
    /// &lt;summary&gt;Neutral. <a href="/platformer/api/PlatformerGameKit.BehaviourTrees/Result">Result</a> is undetermined because execution has not completed.&lt;/summary&gt;
    Pending = 0,

    /// &lt;summary&gt;Positive. The operation was completed successfully.&lt;/summary&gt;
    Pass = 1,

    /// &lt;summary&gt;Negative. The operation was unsuccessful.&lt;/summary&gt;
    Fail = -1,
}
</code></pre>
<p>Nodes can be anything that implements <code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/IBehaviourNode">IBehaviourNode</a></code>:</p>
<pre><code class="language-cs">public interface <a href="/platformer/api/PlatformerGameKit.BehaviourTrees/IBehaviourNode">IBehaviourNode</a> : IPolymorphic
{
    <a href="/platformer/api/PlatformerGameKit.BehaviourTrees/Result">Result</a> Execute();
</code></pre>
<p>Nodes can also have one or more other nodes as their children, similar to the <code>GameObject</code>s in Unity's Hierarchy:</p>
<pre><code class="language-cs">    int ChildCount { get; }

    <a href="/platformer/api/PlatformerGameKit.BehaviourTrees/IBehaviourNode">IBehaviourNode</a> GetChild(int index);
}
</code></pre>
<h1 id="example">Example</h1>
<p><img src="turn-at-wall.png" class="img-responsive"></p>
<ul>
<li>Calling <code>Execute</code> on a <code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/Sequence">Sequence</a></code> will call <code>Execute</code> on each of its children until one of them returns <code>Pending</code> or <code>Fail</code> and then it returns that result. Or if they all return <code>Pass</code>, then the <code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/Sequence">Sequence</a></code> does too.</li>
<li><code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/IsWallInFront">IsWallInFront</a></code> checks if a wall is in front of the character. If so, it returns <code>Pass</code>, but otherwise <code>Fail</code>.</li>
<li><code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/TurnAround">TurnAround</a></code> simply reverses the <code><a href="/platformer/api/PlatformerGameKit.Characters/Character/D9F83294">Character.MovementDirectionX</a></code>.</li>
<li>So a <code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/Sequence">Sequence</a></code> containing <code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/IsWallInFront">IsWallInFront</a></code> then <code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/TurnAround">TurnAround</a></code> will first check for a wall, and if there is one then it will turn the character around. Otherwise if there is no wall, <code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/IsWallInFront">IsWallInFront</a></code> will return <code>Fail</code> and the <code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/Sequence">Sequence</a></code> will return <code>Fail</code> without executing the <code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/TurnAround">TurnAround</a></code> node.</li>
</ul>
<h1 id="brain">Brain</h1>
<p>Since nodes can contain other nodes, any node can be a whole Behaviour Tree. So the <code><a href="/platformer/api/PlatformerGameKit.Characters.Brains/BehaviourTreeBrain">BehaviourTreeBrain</a></code> simply contains one node that will be executed by <code>Awake</code> to perform operations once on startup and another to be executed by <code>FixedUpdate</code> for the main logic of the brain:</p>
<pre><code class="language-cs">public class <a href="/platformer/api/PlatformerGameKit.Characters.Brains/BehaviourTreeBrain">BehaviourTreeBrain</a> : <a href="/platformer/api/PlatformerGameKit.Characters.Brains/CharacterBrain">CharacterBrain</a>
{
    [SerializeReference] private <a href="/platformer/api/PlatformerGameKit.BehaviourTrees/IBehaviourNode">IBehaviourNode</a> _OnAwake;
    [SerializeReference] private <a href="/platformer/api/PlatformerGameKit.BehaviourTrees/IBehaviourNode">IBehaviourNode</a> _OnFixedUpdate;
</code></pre>
<p>Normally, those fields would be <code>null</code> by default when a <code><a href="/platformer/api/PlatformerGameKit.Characters.Brains/BehaviourTreeBrain">BehaviourTreeBrain</a></code> is first added to an object:</p>
<p><img src="null-nodes.png" class="img-responsive"></p>
<p>But it uses a <a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.Reset.html"><code>Reset</code></a> method to automatically assign some default nodes as a more useful starting point:</p>
<pre><code class="language-cs">#if UNITY_EDITOR
    protected virtual void Reset()
    {
        _OnAwake = new SetMovementForward();
        _OnFixedUpdate = new Selector();
        ((IPolymorphicReset)_OnFixedUpdate).Reset();
    }
#endif
</code></pre>
<p><img src="default-nodes.png" class="img-responsive"></p>
<p>The <code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/IBehaviourNode">IBehaviourNode</a></code> interface and the <a href="../core">General Nodes</a> like <code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/Selector">Selector</a></code> and <code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/Sequence">Sequence</a></code> are generalised concepts which have no need to know anything about the Platformer Game Kit's classes so they could be taken directly into another project without needing to be modified (as long as that project has Animancer for the <a href="/animancer/docs/manual/other/polymorphic">Polymorphic Drawer</a> system). However, the <a href="../specific">Specific Nodes</a> like <code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/IsWallInFront">IsWallInFront</a></code> and <code><a href="/platformer/api/PlatformerGameKit.BehaviourTrees/TurnAround">TurnAround</a></code> need to directly interact with the <code><a href="/platformer/api/PlatformerGameKit.Characters/Character">Character</a></code> component. So in order to give those nodes what they need without affecting the ones that don't need it, the <code><a href="/platformer/api/PlatformerGameKit.Characters/Character">Character</a></code> is passed into a <code>new Context</code> so that it can be accessed via the static <code>Context&lt;<a href="/platformer/api/PlatformerGameKit.Characters/Character">Character</a>&gt;.Current</code> property while the <code>Execute</code> method is running:</p>
<pre><code class="language-cs">    protected virtual void Awake()
    {
        using (new Context&lt;<a href="/platformer/api/PlatformerGameKit.Characters/Character">Character</a>&gt;(Character))
            _OnAwake?.Execute();
    }

    protected virtual void FixedUpdate()
    {
        using (new Context&lt;<a href="/platformer/api/PlatformerGameKit.Characters/Character">Character</a>&gt;(Character))
            _OnFixedUpdate?.Execute();
    }
}
</code></pre>
<p>That is actually one of the aspects of this system which has limited extensibility compared to more powerful systems. It works fine for the simple nodes currently in the system, but it would start getting unwieldy if nodes wanted access to more than just the single <code><a href="/platformer/api/PlatformerGameKit.Characters/Character">Character</a></code> the brain is controlling.</p>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                <strong>
  <div style="text-align:left; display:flex">

    <div>
      <p>Download</p>
      <p>
        <a href="https://kybernetik.itch.io/platformer">Itch.io (Recommended)</a>
      </p>
      <p>
        <a href="https://assetstore.unity.com/packages/tools/animation/animancer-pro-116514?aid=1100l8ah5">Asset Store</a>
      </p>
      <p>
        <a href="/animancer">Animancer</a>
      </p>
    </div>

    <div style="width:10%"></div>

    <div>
      <p>Contact</p>
      <p>
        <a href="https://github.com/KybernetikGames/platformer/issues">Github Issues</a>
      </p>
      <p>
        <a href="/platformer/forum">Unity Forum</a>
      </p>
      <p>
        <a href="mailto:mail@kybernetik.com.au?subject=Platformer%20Game%20Kit">Email</a>
      </p>
    </div>

    <div style="width:10%"></div>

    <div>
      <p>Other Assets</p>
      <p>
        <a href="/inspector-gadgets">Inspector Gadgets</a>
      </p>
      <p>
        <a href="/weaver">Weaver</a>
      </p>
      <p>
        <a href="/ultevents">UltEvents</a>
      </p>
    </div>

  </div>
</strong>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>